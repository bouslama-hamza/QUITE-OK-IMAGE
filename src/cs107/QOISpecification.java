package cs107;

public final class QOISpecification {

    private QOISpecification(){}

    // ============================================================================================
    // ================================== CHANNEL INDEXING ========================================
    // ============================================================================================

    public static final int r = 0;

    public static final int g = 1;

    public static final int b = 2;

    public static final int a = 3;


    // ==================================================================================
    // =============================== CHANNELS TAGS ====================================
    // ==================================================================================
    public static final byte RGB  = 3;

    public static final byte RGBA = 4;

    // ==================================================================================
    // =============================== COLOR SPACE TAGS =================================
    // ==================================================================================

    public static final byte sRGB = 0;

    public static final byte ALL  = 1;

    // ==================================================================================
    // =========================== "Quite Ok Image" Header ==============================
    // ==================================================================================

    public static final byte[] QOI_MAGIC = new byte[]{'q', 'o', 'i', 'f'};

    public static final int HEADER_SIZE = QOI_MAGIC.length + 4 + 4 + 1 + 1;

    // ==================================================================================
    // ======================== "Quite Ok Image" Start Pixel ============================
    // ==================================================================================

    public static final byte[] START_PIXEL = new byte[]{0, 0, 0, (byte) 255};

    // ==================================================================================
    // ============================ "Quite Ok Image" EOF ================================
    // ==================================================================================

    public static final byte[] QOI_EOF = new byte[]{0, 0, 0, 0, 0, 0, 0, 1};

    // ==================================================================================
    // ============================ "Quite Ok Image" Tags ===============================
    // ==================================================================================

    public static final byte QOI_OP_RGB_TAG   = (byte) 0b11_11_11_10;

    public static final byte QOI_OP_RGBA_TAG  = (byte) 0b11_11_11_11;

    public static final byte QOI_OP_INDEX_TAG = (byte) 0b00_00_00_00;

    public static final byte QOI_OP_DIFF_TAG  = (byte) 0b01_00_00_00;

    public static final byte QOI_OP_LUMA_TAG  = (byte) 0b10_00_00_00;

    public static final byte QOI_OP_RUN_TAG   = (byte) 0b11_00_00_00;

    // ==================================================================================
    // ======================== "Quite Ok Image" Hash Function ==========================
    // ==================================================================================

    public static byte hash(byte[] pixel){
        assert pixel.length == 4;
        var tmp = (pixel[r] * 3 + pixel[g] * 5 + pixel[b] * 7 + pixel[a] * 11) % 64;
        return (byte) (tmp < 0 ? tmp + 64 : tmp);
    }

}